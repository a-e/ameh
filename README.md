ameh
====

Tools for managing a set of [Atlassian](http://www.atlassian.com) product installations.


Motivation
----------

This project was born out of recurring annoyances with Atlassian products, specifically:

- Lack of `init.d` service scripts to allow automatic startup at boot time
- Non-standard and scattered configuration files and formats
- Inconsistently-named and -located executables for starting and stopping servers
- Too many user accounts created (jira1, jira2 etc.) when installing

The name "ameh" came from "atlas meh", which you could see as a synonym for
"atlas shrug" if you're into that sort of thing. If you like acronyms, you
could think of it as "Atlassian MaintenanceE Helper". The goal of this project
is to make me (and possibly others) have a "meh, no problem" attitude towards
Atlassian product maintenance, instead of the "please fire me and put me out of
my misery" attitude that I have now.


Ideas
-----

Some tools that it might be worthwhile to include:

- init.d scripts, autogenerated based on configured install/home directories
- Backup scripts
- Symlinking scripts, making configuration files and logs easier to manage by
  having them all in one place (preferably somewhere standard like `/etc` and
  `/var/log`)
- User/group maintainer to prevent multiple jira1, jira2 users from being
  created, and to run each service as a dedicated user

Will probably need:

- A single configuration file to define which Atlassian products you have
  installed, where their install/home directories are, what database backend
  you're using, etc.
- A nice wrapper executable that can be installed system-wide


Configuration
-------------

ameh stores its configuration in a file like this:

    [jira]
    install = /opt/atlassian/jira
    home = /var/atlassian/application-data/jira-home
    classes = %(install)s/atlassian-jira/WEB-INF/classes
    crowd = %(classes)s/crowd.properties
    db = %(home)s/dbconfig.xml

    [confluence]
    install = /opt/atlassian/confluence
    home = /var/atlassian/application-data/confluence-home
    db = %(home)s/confluence.cfg.xml

    # Any apps you don't use will have their sections commented out
    #[crowd]
    #[fisheye]

New configuration settings can be added using the `ameh` command-line, or by
directly editing the configuration file (which will typically live in
`/etc/ameh.conf`).


Usage
-----

How it might be used (not implemented yet):

Install init.d scripts:

    $ ameh init jira
    $ ameh init confluence
    $ ameh init all

Display configuration settings:

    $ ameh config
    jira install: /opt/atlassian/jira
    jira home: /var/atlassian/application-data/jira-home
    confluence install: /opt/atlassian/confluence
    confluence home: /var/atlassian/application-data/confluence-home

Display the names of configuration files:

    $ ameh config jira db
    /var/atlassian/application-data/jira-home/dbconfig.xml

    $ ameh config confluence crowd
    /opt/atlassian/confluence/confluence/WEB-INF/classes/crowd.properties

Edit the Jira DB config file:

    $ vim `ameh config jira db`

Create a new configuration setting for Jira's log4j.properties:

    $ ameh config jira log4j /opt/atlassian/jira/atlassian-jira/WEB-INF/classes/log4j.properties

    $ ameh config jira log4j
    /opt/atlassian/jira/atlassian-jira/WEB-INF/classes/log4j.properties

Display the name of the log file for Jira:

    $ ameh log jira
    /opt/atlassian/jira/logs/catalina.out

Tail Jira's log file:

    $ tail -f `ameh log jira`

View Atlassian users and their groups:

    $ ameh user
    jira : jira atlas
    confluence : confluence atlas
    crowd : crowd atlas

Backup Jira (installation and home directories):

    $ ameh backup jira


License
-------

MIT License.

